{% extends 'base.html' %}

{% block title %}My Profile{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row column_title">
        <div class="col-md-12">
            <div class="page_title">
                <h2>My Profile</h2>
            </div>
        </div>
    </div>

    <div class="row column1">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <div class="white_shd full margin_bottom_30">
                <div class="full graph_head">
                    <div class="heading1 margin_0">
                        <h2>User profile</h2>
                    </div>
                </div>
                <div class="full price_table padding_infor_info">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="full dis_flex center_text">
                                <div class="profile_img">
                                    <img width="180" class="rounded-circle"
                                         src="{% if profile_pic %}{{ profile_pic.url }}{% else %}https://media.istockphoto.com/id/1337144146/vector/default-avatar-profile-icon-vector.jpg?s=612x612&w=0&k=20&c=BIbFwuv7FxTWvh5S3vB6bkT0Qv8Vn8N5Ffseq84ClGI={% endif %}" 
                                         alt="Profile Picture" />
                                </div>
                                <div class="profile_contant">
                                    <div class="contact_inner">
                                        <h3>{{ full_name }}</h3>
                                        <p><strong>Matriculation Number:</strong> {{ matriculation_number }}</p>
                                        <ul class="list-unstyled">
                                            <li><strong>Department:</strong> {{ department }}</li>
                                            <li><strong>Email Address:</strong> {{ email }}</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer border-0 bg-white">
                    <!-- Trigger the modal -->
                    <button data-toggle="modal" data-target="#editProfileModal" type="button" class="btn btn-primary me-2">Edit Profile</button>
                </div>
            </div>
        </div>
        <div class="col-md-2"></div>
    </div>
</div>

<!-- Modal for Editing Profile -->
<div class="modal fade" id="editProfileModal" tabindex="-1" role="dialog" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="post" action="{% url 'edit_profile' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Include your form fields here -->
                    {% include 'edit_profile_form.html' %}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Save changes</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}
